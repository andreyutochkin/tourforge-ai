<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3498db">
    <title>TourForge AI - –°–æ–∑–¥–∞–Ω–∏–µ 3D —Ç—É—Ä–æ–≤</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
</head>
<body>
    <div class="app-container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="screen" id="homeScreen">
            <div class="header">
                <h1>TourForge AI</h1>
                <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ 3D —Ç—É—Ä—ã –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</p>
            </div>
            
            <div class="main-actions">
                <button class="btn-primary" id="startTour">
                    <span class="icon">üì∑</span>
                    –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å—ä–µ–º–∫—É
                </button>
                
                <button class="btn-secondary" id="myTours">
                    <span class="icon">üìÇ</span>
                    –ú–æ–∏ —Ç—É—Ä—ã
                </button>
            </div>

            <div class="platform-integration">
                <h3>–ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö:</h3>
                <div class="platform-icons">
                    <span class="platform-icon">–¶–∏–∞–Ω</span>
                    <span class="platform-icon">–ê–≤–∏—Ç–æ</span>
                    <span class="platform-icon">–î–æ–º–ö–ª–∏–∫</span>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ —Ç—É—Ä–æ–≤ -->
        <div class="screen" id="toursScreen" style="display: none;">
            <div class="screen-header">
                <button class="btn-back" id="backFromTours">‚Üê –ù–∞–∑–∞–¥</button>
                <h2>–ú–æ–∏ —Ç—É—Ä—ã</h2>
            </div>

            <div class="tours-list" id="toursList">
                <div class="empty-state">
                    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—É—Ä–æ–≤</p>
                    <button class="btn-primary" id="createFirstTour">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç—É—Ä</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—ä–µ–º–∫–∏ -->
        <div class="screen" id="cameraScreen" style="display: none;">
            <div class="camera-header">
                <button class="btn-back" id="backFromCamera">‚Üê –ù–∞–∑–∞–¥</button>
                <h2>–°—ä–µ–º–∫–∞ –ø–æ–º–µ—â–µ–Ω–∏—è</h2>
                <div class="progress-indicator">
                    <span id="currentStep">1</span>/<span id="totalSteps">8</span>
                </div>
            </div>

            <div class="camera-container">
                <video id="cameraView" autoplay playsinline></video>
                <canvas id="previewCanvas" style="display: none;"></canvas>
                
                <div class="scanning-overlay">
                    <div class="scanning-frame"></div>
                    <div class="scanning-line"></div>
                </div>

                <div class="guidance-overlay">
                    <div class="instruction-box" id="instructionBox">
                        <p>–í—Å—Ç–∞–Ω—å—Ç–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–º–Ω–∞—Ç—ã –∏ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ—Å—å –Ω–∞ 360 –≥—Ä–∞–¥—É—Å–æ–≤</p>
                    </div>
                    <div class="room-label" id="roomLabel">–ì–æ—Å—Ç–∏–Ω–∞—è</div>
                    <div class="capture-hint" id="captureHint">
                        <p>–ù–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É —Å—ä–µ–º–∫–∏ –∫–∞–∂–¥—ã–µ 45 –≥—Ä–∞–¥—É—Å–æ–≤</p>
                    </div>
                </div>
            </div>

            <div class="camera-controls">
                <button class="btn-capture" id="captureButton">
                    <span class="capture-icon">üì∑</span>
                </button>
                
                <div class="capture-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span id="progressText">0%</span>
                </div>
            </div>

            <div class="room-navigation">
                <button class="btn-nav" id="prevRoom" disabled>‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞</button>
                <button class="btn-nav" id="nextRoom">–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–Ω–∞—Ç–∞ ‚Üí</button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ -->
        <div class="screen" id="processingScreen" style="display: none;">
            <div class="processing-header">
                <h2>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
                <p>–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ —Å–Ω–∏–º–∫–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è</p>
            </div>

            <div class="processing-animation">
                <div class="ai-loader">
                    <div class="ai-brain">ü§ñ</div>
                    <div class="pulse-ring"></div>
                    <div class="pulse-ring delay-1"></div>
                    <div class="pulse-ring delay-2"></div>
                </div>
                <p class="ai-status" id="aiStatus">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≥–µ–æ–º–µ—Ç—Ä–∏—é –ø–æ–º–µ—â–µ–Ω–∏—è...</p>
            </div>

            <div class="processing-steps">
                <div class="processing-step active">
                    <span class="step-number">1</span>
                    <span class="step-text">–ê–Ω–∞–ª–∏–∑ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ–º–µ—â–µ–Ω–∏—è</span>
                    <div class="step-progress"></div>
                </div>
                <div class="processing-step">
                    <span class="step-number">2</span>
                    <span class="step-text">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç</span>
                    <div class="step-progress"></div>
                </div>
                <div class="processing-step">
                    <span class="step-number">3</span>
                    <span class="step-text">–°–æ–∑–¥–∞–Ω–∏–µ 3D –º–æ–¥–µ–ª–∏</span>
                    <div class="step-progress"></div>
                </div>
                <div class="processing-step">
                    <span class="step-number">4</span>
                    <span class="step-text">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—É—Ä–∞</span>
                    <div class="step-progress"></div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="screen" id="resultScreen" style="display: none;">
            <div class="result-header">
                <h2>–ü–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è –≥–æ—Ç–æ–≤!</h2>
                <p>–í–∞—à 3D —Ç—É—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω</p>
            </div>

            <div class="floor-plan-container">
                <canvas id="floorPlanCanvas" width="400" height="400"></canvas>
                <div class="room-labels" id="roomLabels"></div>
            </div>

            <div class="room-list" id="roomList">
                <h3>–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è:</h3>
                <div class="rooms-container">
                    <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn-secondary" id="editPlanButton">
                    <span class="btn-icon">‚úèÔ∏è</span>
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω
                </button>
                <button class="btn-primary" id="viewTourButton">
                    <span class="btn-icon">üëÅÔ∏è</span>
                    –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å 3D —Ç—É—Ä
                </button>
                <button class="btn-share" id="shareButton">
                    <span class="btn-icon">üì§</span>
                    –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
            </div>

            <div class="platform-export">
                <h3>–≠–∫—Å–ø–æ—Ä—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:</h3>
                <div class="platform-buttons">
                    <button class="btn-platform" data-platform="cian">–¶–∏–∞–Ω</button>
                    <button class="btn-platform" data-platform="avito">–ê–≤–∏—Ç–æ</button>
                    <button class="btn-platform" data-platform="domclick">–î–æ–º–ö–ª–∏–∫</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—É—Ä–∞ -->
        <div class="screen" id="tourViewerScreen" style="display: none;">
            <div class="screen-header">
                <button class="btn-back" id="backFromViewer">‚Üê –ù–∞–∑–∞–¥</button>
                <h2>3D —Ç—É—Ä –ø–æ–º–µ—â–µ–Ω–∏—è</h2>
            </div>

            <div class="tour-container" id="tourContainer">
                <div class="tour-loading">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ 3D —Ç—É—Ä–∞...</p>
                    <div class="loader"></div>
                </div>
            </div>

            <div class="tour-controls">
                <button class="btn-tour-control" id="zoomIn">+</button>
                <button class="btn-tour-control" id="zoomOut">-</button>
                <button class="btn-tour-control" id="fullscreen">‚õ∂</button>
            </div>

            <div class="tour-hotspots" id="tourHotspots">
                <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="modal" id="editModal" style="display: none;">
            <div class="modal-content">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞</h3>
                <div class="edit-tools">
                    <button class="edit-tool active" data-tool="select">–í—ã–±–æ—Ä</button>
                    <button class="edit-tool" data-tool="wall">–°—Ç–µ–Ω—ã</button>
                    <button class="edit-tool" data-tool="door">–î–≤–µ—Ä–∏</button>
                    <button class="edit-tool" data-tool="window">–û–∫–Ω–∞</button>
                    <button class="edit-tool" data-tool="furniture">–ú–µ–±–µ–ª—å</button>
                </div>
                <div class="edit-area">
                    <canvas id="editCanvas" width="400" height="400"></canvas>
                </div>
                <div class="edit-options" id="editOptions">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –æ–ø—Ü–∏–∏ -->
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelEdit">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-primary" id="saveEdit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π -->
    <div class="camera-settings">
        <button id="switchCamera">üîÑ</button>
        <button id="toggleFlash">‚ö°</button>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="instructionSound" preload="auto"></audio>
    <audio id="captureSound" preload="auto"></audio>
    <audio id="successSound" preload="auto"></audio>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="script.js"></script>
    <script src="platforms/cian-export.js"></script>
    <script src="platforms/avito-export.js"></script>
    <script src="platforms/domclick-export.js"></script>
</body>
</html>
