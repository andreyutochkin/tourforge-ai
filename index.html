<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3498db">
    <title>TourForge AI - –°–æ–∑–¥–∞–Ω–∏–µ 3D —Ç—É—Ä–æ–≤</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="screen active" id="homeScreen">
            <div class="header">
                <div class="logo-container">
                    <div class="logo-icon">üè†</div>
                    <h1>TourForge <span class="ai-text">AI</span></h1>
                </div>
                <p class="subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ 3D —Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</p>
            </div>
            
            <div class="main-content">
                <div class="feature-cards">
                    <div class="feature-card">
                        <div class="feature-icon">üì∑</div>
                        <h3>–ü—Ä–æ—Å—Ç–∞—è —Å—ä–µ–º–∫–∞</h3>
                        <p>–°–Ω–∏–º–∞–π—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∫–∞–º–µ—Ä—ã –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üß†</div>
                        <h3>AI –æ–±—Ä–∞–±–æ—Ç–∫–∞</h3>
                        <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç –∏ –æ–±—ä–µ–∫—Ç–æ–≤</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üöÄ</div>
                        <h3>–ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç</h3>
                        <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</p>
                    </div>
                </div>

                <div class="main-actions">
                    <button class="btn btn-primary btn-large" id="startTour">
                        <span class="btn-icon">üì∑</span>
                        –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å—ä–µ–º–∫—É
                    </button>
                    
                    <button class="btn btn-secondary" id="myTours">
                        <span class="btn-icon">üìÇ</span>
                        –ú–æ–∏ —Ç—É—Ä—ã
                    </button>
                </div>
            </div>

            <div class="platform-integration">
                <h3>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h3>
                <div class="platform-grid">
                    <div class="platform-item">
                        <div class="platform-logo yandex">–Ø</div>
                        <span>–Ø–Ω–¥–µ–∫—Å</span>
                    </div>
                    <div class="platform-item">
                        <div class="platform-logo cian">–¶</div>
                        <span>–¶–∏–∞–Ω</span>
                    </div>
                    <div class="platform-item">
                        <div class="platform-logo avito">–ê</div>
                        <span>–ê–≤–∏—Ç–æ</span>
                    </div>
                    <div class="platform-item">
                        <div class="platform-logo domclick">–î</div>
                        <span>–î–æ–º–ö–ª–∏–∫</span>
                    </div>
                </div>
            </div>

            <footer class="app-footer">
                <p>¬© 2023 TourForge AI ¬∑ –í–µ—Ä—Å–∏—è 1.2.0</p>
            </footer>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ —Ç—É—Ä–æ–≤ -->
        <div class="screen" id="toursScreen">
            <div class="screen-header">
                <button class="btn btn-back" id="backFromTours">
                    <span class="btn-icon">‚Üê</span>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>–ú–æ–∏ —Ç—É—Ä—ã</h2>
            </div>

            <div class="screen-content">
                <div class="tours-container" id="toursList">
                    <div class="empty-state">
                        <div class="empty-icon">üìÇ</div>
                        <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—É—Ä–æ–≤</h3>
                        <p>–ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ 3D —Ç—É—Ä–∞</p>
                        <button class="btn btn-primary" id="createFirstTour">
                            <span class="btn-icon">üì∑</span>
                            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç—É—Ä
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—ä–µ–º–∫–∏ -->
        <div class="screen" id="cameraScreen">
            <div class="screen-header">
                <button class="btn btn-back" id="backFromCamera">
                    <span class="btn-icon">‚Üê</span>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>–°—ä–µ–º–∫–∞ –ø–æ–º–µ—â–µ–Ω–∏—è</h2>
                <div class="progress-indicator">
                    <span id="currentStep">1</span>/<span id="totalSteps">8</span>
                </div>
            </div>

            <div class="screen-content">
                <div class="camera-container">
                    <div class="camera-view" id="cameraViewContainer">
                        <video id="cameraView" autoplay playsinline></video>
                        <canvas id="previewCanvas" style="display: none;"></canvas>
                        
                        <div class="scanning-overlay">
                            <div class="scanning-frame"></div>
                            <div class="scanning-line"></div>
                            <div class="scanning-dots">
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                                <div class="dot"></div>
                            </div>
                        </div>

                        <div class="guidance-overlay">
                            <div class="instruction-box" id="instructionBox">
                                <div class="instruction-icon">üéØ</div>
                                <p>–í—Å—Ç–∞–Ω—å—Ç–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–º–Ω–∞—Ç—ã –∏ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ—Å—å –Ω–∞ 360 –≥—Ä–∞–¥—É—Å–æ–≤</p>
                            </div>
                            <div class="room-label" id="roomLabel">–ì–æ—Å—Ç–∏–Ω–∞—è</div>
                        </div>
                    </div>

                    <div class="camera-controls">
                        <div class="capture-progress">
                            <div class="progress-text" id="progressText">0% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        
                        <button class="btn btn-capture" id="captureButton">
                            <span class="capture-icon"></span>
                        </button>
                    </div>
                </div>

                <div class="room-navigation">
                    <button class="btn btn-nav" id="prevRoom" disabled>
                        <span class="btn-icon">‚Üê</span>
                        –ü—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞
                    </button>
                    <button class="btn btn-nav" id="nextRoom">
                        –°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–Ω–∞—Ç–∞
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ -->
        <div class="screen" id="processingScreen">
            <div class="screen-content centered">
                <div class="processing-animation">
                    <div class="ai-loader">
                        <div class="ai-brain">ü§ñ</div>
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring delay-1"></div>
                        <div class="pulse-ring delay-2"></div>
                    </div>
                    <h2>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
                    <p class="ai-status" id="aiStatus">–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ —Å–Ω–∏–º–∫–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è...</p>
                </div>

                <div class="processing-steps">
                    <div class="processing-step active">
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <div class="step-check">‚úì</div>
                        </div>
                        <span class="step-text">–ê–Ω–∞–ª–∏–∑ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ–º–µ—â–µ–Ω–∏—è</span>
                        <div class="step-progress"></div>
                    </div>
                    <div class="processing-step">
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <div class="step-check">‚úì</div>
                        </div>
                        <span class="step-text">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç</span>
                        <div class="step-progress"></div>
                    </div>
                    <div class="processing-step">
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <div class="step-check">‚úì</div>
                        </div>
                        <span class="step-text">–°–æ–∑–¥–∞–Ω–∏–µ 3D –º–æ–¥–µ–ª–∏</span>
                        <div class="step-progress"></div>
                    </div>
                    <div class="processing-step">
                        <div class="step-indicator">
                            <span class="step-number">4</span>
                            <div class="step-check">‚úì</div>
                        </div>
                        <span class="step-text">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—É—Ä–∞</span>
                        <div class="step-progress"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="screen" id="resultScreen">
            <div class="screen-header">
                <button class="btn btn-back" id="backFromResults">
                    <span class="btn-icon">‚Üê</span>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>–ü–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è –≥–æ—Ç–æ–≤!</h2>
            </div>

            <div class="screen-content">
                <div class="success-message">
                    <div class="success-icon">üéâ</div>
                    <p>–í–∞—à 3D —Ç—É—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</p>
                </div>

                <div class="result-content">
                    <div class="floor-plan-section">
                        <h3>–ü–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è</h3>
                        <div class="floor-plan-container">
                            <canvas id="floorPlanCanvas" width="400" height="400"></canvas>
                            <div class="room-labels" id="roomLabels"></div>
                        </div>
                    </div>

                    <div class="room-details-section">
                        <h3>–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–º–µ—â–µ–Ω–∏—è</h3>
                        <div class="rooms-grid" id="roomList">
                            <div class="room-item">
                                <div class="room-icon">üõãÔ∏è</div>
                                <div class="room-info">
                                    <div class="room-name">–ì–æ—Å—Ç–∏–Ω–∞—è</div>
                                    <div class="room-area">20 –º¬≤</div>
                                </div>
                            </div>
                            <div class="room-item">
                                <div class="room-icon">üë®‚Äçüç≥</div>
                                <div class="room-info">
                                    <div class="room-name">–ö—É—Ö–Ω—è</div>
                                    <div class="room-area">12 –º¬≤</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" id="editPlanButton">
                        <span class="btn-icon">‚úèÔ∏è</span>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω
                    </button>
                    <button class="btn btn-primary" id="viewTourButton">
                        <span class="btn-icon">üëÅÔ∏è</span>
                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å 3D —Ç—É—Ä
                    </button>
                    <button class="btn btn-success" id="shareButton">
                        <span class="btn-icon">üì§</span>
                        –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                    </button>
                </div>

                <div class="platform-export">
                    <h3>–≠–∫—Å–ø–æ—Ä—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h3>
                    <div class="platform-buttons">
                        <button class="btn btn-platform yandex" data-platform="yandex">
                            <span class="btn-icon">–Ø</span>
                            –Ø–Ω–¥–µ–∫—Å.–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
                        </button>
                        <button class="btn btn-platform cian" data-platform="cian">
                            <span class="btn-icon">–¶</span>
                            –¶–∏–∞–Ω
                        </button>
                        <button class="btn btn-platform avito" data-platform="avito">
                            <span class="btn-icon">–ê</span>
                            –ê–≤–∏—Ç–æ
                        </button>
                        <button class="btn btn-platform domclick" data-platform="domclick">
                            <span class="btn-icon">–î</span>
                            –î–æ–º–ö–ª–∏–∫
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—É—Ä–∞ -->
        <div class="screen" id="tourViewerScreen">
            <div class="screen-header">
                <button class="btn btn-back" id="backFromViewer">
                    <span class="btn-icon">‚Üê</span>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>3D —Ç—É—Ä –ø–æ–º–µ—â–µ–Ω–∏—è</h2>
                <div class="viewer-actions">
                    <button class="btn btn-icon" id="fullscreenButton">
                        <span class="btn-icon">‚õ∂</span>
                    </button>
                </div>
            </div>

            <div class="screen-content">
                <div class="tour-container" id="tourContainer">
                    <div class="tour-loading">
                        <div class="loader"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ 3D —Ç—É—Ä–∞...</p>
                    </div>
                </div>

                <div class="tour-controls">
                    <div class="control-group">
                        <button class="btn btn-control" id="zoomIn">
                            <span class="btn-icon">+</span>
                        </button>
                        <button class="btn btn-control" id="zoomOut">
                            <span class="btn-icon">-</span>
                        </button>
                    </div>
                    
                    <div class="tour-hotspots" id="tourHotspots">
                        <button class="btn btn-hotspot" data-room="living-room">
                            <span class="btn-icon">üõãÔ∏è</span>
                            –ì–æ—Å—Ç–∏–Ω–∞—è
                        </button>
                        <button class="btn btn-hotspot" data-room="kitchen">
                            <span class="btn-icon">üë®‚Äçüç≥</span>
                            –ö—É—Ö–Ω—è
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="modal" id="editModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞</h3>
                    <button class="btn btn-close" id="closeEditModal">
                        <span class="btn-icon">√ó</span>
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="edit-tools">
                        <button class="btn btn-tool active" data-tool="select">
                            <span class="btn-icon">‚ÜñÔ∏è</span>
                            –í—ã–±–æ—Ä
                        </button>
                        <button class="btn btn-tool" data-tool="wall">
                            <span class="btn-icon">üß±</span>
                            –°—Ç–µ–Ω—ã
                        </button>
                        <button class="btn btn-tool" data-tool="door">
                            <span class="btn-icon">üö™</span>
                            –î–≤–µ—Ä–∏
                        </button>
                        <button class="btn btn-tool" data-tool="window">
                            <span class="btn-icon">ü™ü</span>
                            –û–∫–Ω–∞
                        </button>
                        <button class="btn btn-tool" data-tool="furniture">
                            <span class="btn-icon">üõãÔ∏è</span>
                            –ú–µ–±–µ–ª—å
                        </button>
                    </div>

                    <div class="edit-area">
                        <canvas id="editCanvas" width="400" height="400"></canvas>
                    </div>

                    <div class="edit-options" id="editOptions">
                        <div class="option-group">
                            <label>–¢–æ–ª—â–∏–Ω–∞ —Å—Ç–µ–Ω—ã</label>
                            <input type="range" min="1" max="10" value="2">
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelEdit">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button class="btn btn-primary" id="saveEdit">
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
        <div class="modal" id="exportModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–≠–∫—Å–ø–æ—Ä—Ç —Ç—É—Ä–∞</h3>
                    <button class="btn btn-close" id="closeExportModal">
                        <span class="btn-icon">√ó</span>
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="export-options">
                        <div class="option-card">
                            <div class="option-icon">üìÅ</div>
                            <h4>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</h4>
                            <p>–°–∫–∞—á–∞–π—Ç–µ ZIP-–∞—Ä—Ö–∏–≤ —Å —Ç—É—Ä–æ–º –¥–ª—è —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏</p>
                            <button class="btn btn-primary" id="saveToDevice">
                                –°–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤
                            </button>
                        </div>
                        
                        <div class="option-card">
                            <div class="option-icon">üåê</div>
                            <h4>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π</h4>
                            <p>–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç—É—Ä–∞ –æ–Ω–ª–∞–π–Ω</p>
                            <button class="btn btn-primary" id="generateLink">
                                –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É
                            </button>
                        </div>
                    </div>

                    <div class="platform-export">
                        <h4>–≠–∫—Å–ø–æ—Ä—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h4>
                        <div class="platform-grid">
                            <button class="btn btn-platform yandex" data-platform="yandex">
                                –Ø–Ω–¥–µ–∫—Å.–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
                            </button>
                            <button class="btn btn-platform cian" data-platform="cian">
                                –¶–∏–∞–Ω
                            </button>
                            <button class="btn btn-platform avito" data-platform="avito">
                                –ê–≤–∏—Ç–æ
                            </button>
                            <button class="btn btn-platform domclick" data-platform="domclick">
                                –î–æ–º–ö–ª–∏–∫
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0"></script>
    <script src="script.js"></script>
    <script src="platforms/cian-export.js"></script>
    <script src="platforms/avito-export.js"></script>
    <script src="platforms/domclick-export.js"></script>
    <script src="platforms/yandex-export.js"></script>
</body>
</html>
